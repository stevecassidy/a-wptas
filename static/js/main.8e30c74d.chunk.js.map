{"version":3,"sources":["urls.ts","components/home/Home.tsx","components/imageQuestion/images/cup.png","components/imageQuestion/images/keys.png","components/imageQuestion/images/bird.png","types.ts","redux/patients.ts","components/imageQuestion/ImageBlock.tsx","components/imageQuestion/ImageQuestion.tsx","components/imageQuestion/images/clock.png","components/imageQuestion/images/flower.png","components/imageQuestion/images/pen.png","components/imageQuestion/images/scissors.png","components/imageQuestion/images/toothbrush.png","components/imageQuestion/ImageGrid.tsx","components/imageQuestion/images/fork.png","components/newPatient/NewPatient.tsx","components/screeningQ/ScreeningQ.tsx","components/binaryChoice/BinaryChoice.tsx","components/question/Question.tsx","components/patientList/PatientList.tsx","components/patientReport/PatientReport.tsx","components/setReminder/SetReminder.tsx","components/help/Help.tsx","App.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","redux/configureStore.ts","redux/migrate.ts","index.tsx"],"names":["r","path","BASE_URL","urls","home","newpatient","screening","questions","images","imageresponse","imagegrid","listpatients","patientreport","setreminder","help","Home","props","onClick","event","preventDefault","currentTarget","dataset","navigate","className","modifier","data-path","paths","Patient","name","date","location","screened","tests","reminder","this","Date","toISOString","newTest","TestResult","push","length","console","log","result","pictures","Array","LocalNotifications","Plugins","ADD_PATIENT","UPDATE_PATIENT","SELECT_PATIENT","DELETE_PATIENT","SET_PATIENT_PICTURE_SCORE","SET_PATIENT_TIMER","selectPatient","index","type","updatePatient","patient","setPatientPictureScore","nvalue","initialState","patients","currentPatient","reducer","state","action","newState","Object","assign","slice","updatedPatient","lastTest","alarmTime","undefined","now","schedule","notifications","title","body","id","at","actionTypeId","extra","then","handle","addListener","patientId","notification","remove","localStorage","setItem","JSON","stringify","ImageBlock","label","image","respond","callback","useState","selected","setSelected","src","alt","ImageQuestion","dispatch","useDispatch","score","setScore","next","actions","prev","Math","min","max","cup","keys","bird","ImageGrid","correct","incorrect","clock","flower","toothbrush","pen","scissors","NewPatient","newPatient","setPatient","value","float","onChange","p","updateName","target","placeholder","loc","updateLocation","style","textAlign","ScreeningQ","useSelector","BinaryChoice","val","yesclass","noclass","size","default","icon","YesNoQuestion","question","answer","text","hint","v","Questions","testResult","setResult","setQuestion","newResult","updateLastTest","PatientList","sortedState","sort","a","b","aR","bR","dummy","setDummy","useEffect","interval","setInterval","clearInterval","dataSource","renderRow","row","idx","parse","toLocaleDateString","day","month","hour","minute","floor","toFixed","PatientReport","format","reverse","map","tr","formatDistanceToNow","addSuffix","filter","x","SetReminder","timerValue","setTimerValue","setTimer","minutes","parseInt","Help","href","App","renderToolbar","to","isLocalhost","Boolean","window","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","preloadedState","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","get_data_version","version","getItem","migrations","newPatients","set_data_version","createStoreWithMiddleware","applyMiddleware","createStore","forEach","fn","migrate","persistedStateString","configureStore","patientReducer","store","requestPermission","response","ReactDOM","render","document","getElementById","URL","process","origin","addEventListener","fetch","headers","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.8e30c74d.chunk.js","sourcesContent":["\n// needs to be the location on first load...will this work? \nconst BASE_URL = process.env.PUBLIC_URL;\n\nconst r = (path: string) => BASE_URL + '/' + path; \n\nconst urls = {\n    home: r(''),\n    newpatient: r('newpatient'),\n    screening: r('screening'),\n    questions: r('questions'),\n    images: r('images'),\n    imageresponse: r('imageresponse'),\n    imagegrid: r('imagegrid'),\n    listpatients: r('listpatients'),\n    patientreport: r('patientreport'),\n    setreminder: r('setreminder'),\n    help: r('help')\n};\n\nexport default urls;\n","import React from 'react';\nimport { RouteComponentProps, navigate} from \"@reach/router\"\nimport {Button, Card} from 'react-onsenui';\nimport paths from '../../urls';\nimport './Home.css';\n\nfunction Home(props: RouteComponentProps) {\n\n    const onClick = (event: React.MouseEvent<HTMLElement>) => {\n        event.preventDefault();\n        if (event.currentTarget.dataset.path) {\n            navigate(event.currentTarget.dataset.path);\n        }\n    };\n\n  return (\n    <div className=\"Home\">\n        <Card >\n            <div className='title'>\n            <Button onClick={onClick} modifier='large-cta' data-path={paths.newpatient}>New Patient</Button>\n            </div>\n            <div className='content'>\n            <p>Start an assessment of a new patient.</p>\n            </div>\n        </Card>\n        <Card >\n            <div className='title'>\n            <Button onClick={onClick} modifier='large-cta' data-path={paths.listpatients}>Review Patients</Button>\n            </div>\n            <div className='content'>\n            <p>Review results from previous patients.</p>\n            </div>\n        </Card>\n\n        <Card>\n        <p>This app is intended for use by clinicians familiar with the \n            Abbreviated-Westmead PTA Scale (A-WPTAS). When combined with a \n            standardised GCS assessment it provides an objective measure of \n            post-traumatic amnesia (PTA). \n           </p> \n            <p><Button onClick={onClick} data-path={paths.help}>Find out more...</Button></p>\n        </Card>\n    </div>\n  );\n}\n\nexport default Home;\n","export default __webpack_public_path__ + \"static/media/cup.13b54823.png\";","export default __webpack_public_path__ + \"static/media/keys.44c41ab1.png\";","export default __webpack_public_path__ + \"static/media/bird.a9626b2f.png\";","export class Patient {\n    name: string;\n    date: string;\n    location: string;\n    screened: boolean;\n    tests: Array<TestResult>;\n    reminder: string;\n\n    constructor() {\n        this.date = new Date().toISOString();\n        this.reminder = '';\n        this.tests = [];\n        this.location = '';\n        this.name = '';\n        this.screened = false;\n    }\n\n    newTest(): TestResult {\n        const newTest = new TestResult();\n        this.tests.push(newTest);\n        return newTest;\n    }\n\n    lastTest(): TestResult {\n        if (this.tests.length === 0) {\n            console.log(\"lastTest making new test\")\n            this.tests.push(new TestResult())\n        }\n        return this.tests[this.tests.length-1];\n    };\n\n    updateLastTest(result: TestResult): void {\n        this.tests.push(result); \n    }\n}\n\nexport class TestResult {\n    date: string;\n    questions: Array<boolean>;\n    pictures: number;\n\n    constructor() {\n        this.date = new Date().toISOString();\n        this.questions = new Array<boolean>(5);\n        this.pictures = 0;\n    }\n}\n\nexport interface StateType {\n    patients: Array<Patient>;\n    currentPatient: number;\n}\n\nexport interface ActionType { \n    type?: string; \n    patient?: Patient; \n    index?: number; \n    nvalue?: number;\n    test?: TestResult;\n  }\n","import {Patient, TestResult, StateType, ActionType} from '../types'\nimport { Plugins } from '@capacitor/core';\nimport { navigate } from '@reach/router';\nimport paths from '../urls';\nconst { LocalNotifications } = Plugins;\n\nconst ADD_PATIENT = 'ADD_PATIENT';\nconst UPDATE_PATIENT = 'UPDATE_PATIENT';\nconst TEST_PATIENT = 'TEST_PATIENT';\nconst SELECT_PATIENT = 'SELECT_PATIENT';\nconst DELETE_PATIENT = 'DELETE_PATIENT';\nconst SET_PATIENT_PICTURE_SCORE = 'SET_PATIENT_PICTURE_SCORE';\nconst SET_PATIENT_TIMER = 'SET_PATIENT_TIMER';\n\nexport function selectPatient(index: number) : ActionType {\n  return {\n    type: SELECT_PATIENT,\n    index\n  }\n}\n\nexport function deletePatient(index: number) : ActionType {\n  return {\n    type: DELETE_PATIENT,\n    index\n  }\n}\n\nexport function updatePatient(patient: Patient) : ActionType {\n  return {\n    type: UPDATE_PATIENT,\n    patient\n  };\n}\n\nexport function addTestForPatient(patient: Patient, test: TestResult) : ActionType {\n    return {\n      type: TEST_PATIENT,\n      patient,\n      test\n    };\n  }\n\nexport function setPatientPictureScore(nvalue: number) : ActionType {\n    return {\n        type: SET_PATIENT_PICTURE_SCORE,\n        nvalue\n    }\n}\n\nexport function setPatientTimer(nvalue: number, patient: Patient) : ActionType {\n    return {\n        type: SET_PATIENT_TIMER,\n        nvalue,\n        patient\n    }\n}\n\nexport function addPatient(patient: Patient) : ActionType {\n  return {\n    type: ADD_PATIENT,\n    patient\n  }\n}\n\nconst initialState: StateType = {\n  patients: [],\n  currentPatient: -1\n};\n\nexport default function reducer(state: StateType = initialState, \n                                action: ActionType) {\n\n    let newState: StateType = Object.assign({}, state);\n    switch (action.type){\n    case UPDATE_PATIENT:\n        if (state.currentPatient >= 0 && state.currentPatient < state.patients.length) {\n            console.log(\"Updating Patient\", state.currentPatient)\n            newState =  Object.assign(\n                {},\n                state,\n                {\n                    patients: [\n                        ...state.patients.slice(0, state.currentPatient),\n                        action.patient,\n                        ...state.patients.slice(state.currentPatient+1)\n                    ]\n                }\n                );\n            } else {\n                console.log(\"didn't update patient\", state.currentPatient)\n            }\n            break; \n    case ADD_PATIENT:\n        newState = Object.assign(\n            {},\n            state,\n            {\n                patients: [...state.patients, action.patient],\n                currentPatient: state.patients.length  // index of newly inserted element\n            }\n            );\n        break;\n    case SELECT_PATIENT:  // make the patient at index be the current patient\n        if (typeof(action.index) === \"number\" && action.index >= 0 && action.index < state.patients.length) {\n            newState = Object.assign(\n                {},\n                state,\n                {\n                    currentPatient: action.index\n                }\n                );\n            } else {\n                console.log(\"SELECT_PATIENT out of range\", action.index, state.patients.length)\n            }\n        break;\n    case DELETE_PATIENT:\n        if (typeof(action.index) === \"number\"  && action.index >= 0 && action.index < state.patients.length) {\n            newState = Object.assign(\n                {},\n                state,\n                {\n                    patients: [\n                    ...state.patients.slice(0, action.index),\n                    ...state.patients.slice(action.index+1)\n                    ]\n                }\n                );\n        }\n        break;\n    case SET_PATIENT_PICTURE_SCORE:\n        if (state.currentPatient >= 0) {\n            if (typeof(action.nvalue) === \"number\" ) {\n                const updatedPatient = Object.assign(\n                    new Patient(),\n                    state.patients[state.currentPatient]\n                );\n                updatedPatient.lastTest().pictures = action.nvalue;\n                newState = Object.assign(\n                    {},\n                    state,\n                    {\n                        patients: [\n                            ...state.patients.slice(0, state.currentPatient),\n                            updatedPatient,\n                            ...state.patients.slice(state.currentPatient+1)\n                        ]\n                    }\n                );\n            }\n        }\n        break;\n    case SET_PATIENT_TIMER:\n        if (state.currentPatient >= 0) {\n            if (typeof(action.nvalue) === \"number\" && action.patient !== undefined) {\n                let alarmTime : Date;\n                if (action.nvalue !== 0) {\n                    alarmTime = (new Date(Date.now() + action.nvalue * 60 * 1000));\n\n                    LocalNotifications.schedule({\n                        notifications: [\n                            {\n                                title: \"Concussion Test Alarm\",\n                                body: \"Time to test image recall for \" + action.patient.name,\n                                id: state.currentPatient,\n                                schedule: { at: alarmTime },\n                                actionTypeId: \"\",\n                                extra: null\n                                 \n                            }\n                        ]\n                    })\n                    .then(() => {\n                        const handle = LocalNotifications.addListener('localNotificationActionPerformed', \n                                 (action) => {\n                                    const patientId = action.notification.id;\n                                    selectPatient(patientId);\n                                    handle.remove();  // remove this listener\n                                    // set the view to patient report\n                                    console.log(\"handling notification for patient\", patientId);\n                                    navigate(paths.patientreport);\n                                }\n                            );\n                        });\n\n                    const updatedPatient = Object.assign(\n                        {},\n                        state.patients[state.currentPatient],\n                        {\n                            reminder: alarmTime\n                        }\n                    );\n\n                    newState = Object.assign(\n                        {},\n                        state,\n                        {\n                            patients: [\n                                ...state.patients.slice(0, state.currentPatient),\n                                updatedPatient,\n                                ...state.patients.slice(state.currentPatient+1)\n                            ]\n                        }\n                    );\n                }\n            }\n        }\n        break;\n    }\n\n  // update localStorage\n  localStorage.setItem('state', JSON.stringify(newState));\n\n  return newState;\n}\n\n","\nimport {useState} from 'react';   \n\n\nconst ImageBlock = ({label, image, respond, callback}: any) => {\n\n    const [selected, setSelected] = useState(false);\n\n    const onClick = () => {\n        if (respond) {\n            callback(!selected);\n            setSelected(!selected);\n        }\n    }\n\n    let className = 'image';\n    if (selected) {\n        className += ' selected';\n    }\n\n    return (                \n    <div className={className} onClick={onClick}>\n        <img src={image} alt={label}></img>\n    </div>\n    )\n}\n\nexport default ImageBlock;","import {useState} from 'react';\nimport {Button, Row, Col} from 'react-onsenui';\nimport {RouteComponentProps} from '@reach/router';\nimport './ImageQuestion.css';\nimport cup from './images/cup.png';\nimport keys from './images/keys.png';\nimport bird from './images/bird.png';\nimport { navigate } from '@reach/router';\nimport paths from '../../urls';\nimport {useDispatch} from 'react-redux';\nimport * as actions from '../../redux/patients';\n\nimport ImageBlock from './ImageBlock';\n\ninterface ImageQuestionProps extends RouteComponentProps {\n    respond: boolean\n}\n\nconst ImageQuestion = ({respond}: ImageQuestionProps) => {\n\n    const dispatch = useDispatch();\n    const [score, setScore] = useState(0);\n\n    const next = () => {\n        if (!respond) {\n            //navigate(paths.imageresponse);\n            navigate(paths.setreminder);\n        } else {\n            dispatch(actions.setPatientPictureScore(score));\n            navigate(paths.patientreport)\n        }\n    }\n    const prev = () => {\n        if (respond) {\n            navigate(paths.images);\n        } else {\n            navigate(paths.newpatient)\n        }\n    }\n\n    const callback = (state: boolean) => {\n        if (state) {\n            setScore(Math.min(3, score+1))\n        } else {\n            setScore(Math.max(0, score-1))\n        }\n        \n    }\n\n    if (respond) {\n        return (\n            <div className='image-question'>\n                <div id='image-question-text'>\n                    <p>Touch the pictures correctly recalled by the patient</p>\n                </div>\n            <div className='image-strip'>\n                <ImageBlock label=\"cup\" image={cup} respond={respond} callback={callback}/>\n                <ImageBlock label=\"keys\" image={keys} respond={respond} callback={callback}/>\n                <ImageBlock label=\"bird\" image={bird} respond={respond} callback={callback}/>\n            </div>\n            <Row >\n                <Col><Button  onClick={prev}>Prev</Button></Col>\n                <Col><Button  onClick={next}>Next</Button></Col>\n            </Row>\n            </div>\n        )\n    } else {\n        return (\n            <div className='image-question'> \n                <div id='image-question-text'>\n                    <p>I want you to remember these pictures for later recall:</p>\n                </div>\n            <div className='image-strip'>\n                <ImageBlock label=\"cup\" image={cup} />\n                <ImageBlock label=\"keys\" image={keys} />\n                <ImageBlock label=\"bird\" image={bird} />\n            </div>\n            <Row >\n                <Col><Button  onClick={prev}>Prev</Button></Col>\n                <Col><Button  onClick={next}>Next</Button></Col>\n            </Row>\n            </div>\n        )\n    }\n}\n\n\nexport default ImageQuestion;","export default __webpack_public_path__ + \"static/media/clock.7e78c6fb.png\";","export default __webpack_public_path__ + \"static/media/flower.a9e02e69.png\";","export default __webpack_public_path__ + \"static/media/pen.160e6e57.png\";","export default __webpack_public_path__ + \"static/media/scissors.bfc13897.png\";","export default __webpack_public_path__ + \"static/media/toothbrush.9bcb0930.png\";","import {useState} from 'react';\nimport {Button, Row, Col} from 'react-onsenui';\nimport {RouteComponentProps} from '@reach/router';\nimport './ImageQuestion.css';\nimport cup from './images/cup.png';\nimport keys from './images/keys.png';\nimport bird from './images/bird.png';\nimport clock from './images/clock.png';\nimport flower from './images/flower.png';\nimport fork from './images/fork.png';\nimport pen from './images/pen.png';\nimport scissors from './images/scissors.png';\nimport toothbrush from './images/toothbrush.png';\nimport { navigate } from '@reach/router';\nimport paths from '../../urls';\nimport ImageBlock from './ImageBlock';\n\nimport {useDispatch} from 'react-redux';\nimport * as actions from '../../redux/patients';\n\n\nconst ImageGrid = (props: RouteComponentProps) => {\n\n    const dispatch = useDispatch();\n    const [score, setScore] = useState(0);\n\n    const done = () => {\n            dispatch(actions.setPatientPictureScore(score));\n            navigate(paths.patientreport)\n    }\n\n    const correct = (state: boolean) => {\n        if (state) {\n            setScore(Math.min(3, score+1))\n        } else {\n            setScore(Math.max(0, score-1))\n        }\n    }\n\n    const incorrect = (state: boolean) => {\n        // don't count incorrect responses\n    }\n\n\n    return (\n        <div className='image-question'>\n            <div id='image-question-text'>\n                <p>Touch the pictures you remember</p>\n            </div>\n            <div className='image-grid'>\n                <ImageBlock label=\"cup\" image={cup} respond={true} callback={correct}/>\n                <ImageBlock label=\"clock\" image={clock} respond={true} callback={incorrect}/>\n                <ImageBlock label=\"flower\" image={flower} respond={true} callback={incorrect}/>\n                <ImageBlock label=\"fork\" image={fork} respond={true} callback={incorrect}/>\n                <ImageBlock label=\"keys\" image={keys} respond={true} callback={correct}/>\n                <ImageBlock label=\"toothbrush\" image={toothbrush} respond={true} callback={incorrect}/>\n                <ImageBlock label=\"bird\" image={bird} respond={true} callback={correct}/>\n                <ImageBlock label=\"pen\" image={pen} respond={true} callback={incorrect}/>\n                <ImageBlock label=\"scissors\" image={scissors} respond={true} callback={incorrect}/>\n            </div>\n            <Row>\n                <Col><Button id=\"done-button\" onClick={done}>Done</Button></Col> \n            </Row>\n        </div>\n    )\n    \n}\n\n\nexport default ImageGrid;","export default \"data:image/png;base64,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\"","import { navigate } from '@reach/router';\nimport { useState } from 'react';\nimport {RouteComponentProps} from '@reach/router';\nimport {Input, Button} from 'react-onsenui';\nimport {useDispatch} from 'react-redux';\nimport {Patient} from '../../types';\nimport * as actions from '../../redux/patients';\nimport paths from '../../urls';\nimport './NewPatient.css'\n\nconst NewPatient = (props: RouteComponentProps) => {\n\n    const dispatch = useDispatch();\n\n    const newPatient = new Patient();\n\n    const [patient, setPatient] = useState(newPatient)\n\n    const onClick = (event: any) => {\n        dispatch(actions.addPatient(patient))\n        navigate(paths.screening)\n    }\n\n    const updateName = (name: string) => {\n        const p = Object.assign({}, patient)\n        p.name = name;\n        setPatient(p);\n    }\n    const updateLocation = (loc: string) => {\n        const p = Object.assign({}, patient)\n        p.location = loc;\n        setPatient(p);\n    }\n\n    return (\n        <div className=\"new-patient-form\">\n                <div className='form-row'>\n                    <Input\n                        value={patient.name} float\n                        onChange={(event: any) => { updateName(event.target.value)} }\n                        placeholder='Patient Name' /> \n                \n                </div>\n                <div className='form-row'>\n                    <Input\n                        value={patient.location} float\n                        onChange={(event: any) => { updateLocation(event.target.value)} }\n                        placeholder='Location' /> \n                </div>\n\n                <div className='form-row'>\n                    <Button onClick={onClick}>Next</Button>\n                </div>                \n                <div className='form-row' style={{textAlign: 'center'}}>\n                    Date and time are<br></br> automatically recorded.\n                </div>\n        </div>\n    )\n\n}\n\nexport default NewPatient;","import React from 'react';\nimport { RouteComponentProps, navigate } from \"@reach/router\"\nimport {Button, Card} from 'react-onsenui';\nimport paths from '../../urls';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Patient, StateType } from '../../types';\nimport * as actions from '../../redux/patients';\nimport './ScreeningQ.css';\n\n\nfunction ScreeningQ(props: RouteComponentProps) {\n\n    const dispatch = useDispatch()\n    const patient: Patient = useSelector<StateType, Patient>(state => Object.assign(new Patient(), state.patients[state.currentPatient]))\n    \n    const confirm = (event: React.MouseEvent<HTMLElement>) => {\n        event.preventDefault();   \n        // set the current patient screening status\n        patient.screened = true;\n        console.log(patient);\n        dispatch(actions.updatePatient(patient));\n        navigate(paths.questions);\n    };\n\n    const cancel = (event: React.MouseEvent<HTMLElement>) => {\n        event.preventDefault();   \n        navigate(paths.home);\n    };\n\n    if (patient.screened) {\n        navigate(paths.questions);\n    }\n\n\n  return (\n    <div className=\"ScreeningQ\">\n        <Card >\n            <div className='title'>\n                Pre-Test Screening\n            </div>\n            <div className='content'>\n            <p>Confirm that the patient is:</p>\n            <ul>\n                <li>Able to open their eyes spontaneously</li>\n                <li>Able to respond to verbal commands</li>\n            </ul>\n\n            <p>If you cannot confirm this then the patient is not\n                a suitable candidate for this test.\n            </p>\n            \n            <Button onClick={confirm}>Confirm</Button>&nbsp;\n            <Button className=\"button--outline\" onClick={cancel}>Cancel Test</Button>\n            </div>\n        </Card>\n      \n    </div>\n  );\n}\n\nexport default ScreeningQ;\n","import React from 'react';\nimport {Icon} from 'react-onsenui';\nimport './BinaryChoice.css'\n\nconst BinaryChoice = ({callback, value}: any) => {\n\n  const onClick = (val: boolean) => {\n    callback(val);\n  }\n\n  let yesclass = value?'selected':'';\n  let noclass = value?'':'selected';\n  if (typeof(value) === 'undefined') {\n    noclass = '';\n  }\n\n  return (\n\n      <div>   \n        <div className=\"binaryChoiceContainer\">\n          <div className={\"binary-choice-button yes-button \" + yesclass} onClick={() => onClick(true)}>\n            <Icon size={{default: 120}} icon='check' />\n          </div>\n          <div className={\"binary-choice-button no-button \" + noclass} onClick={() => onClick(false)}>\n            <Icon size={{default: 120}} icon='close' />\n          </div>\n        </div>\n      </div> \n\n\n\n\n  );\n};\n\nexport default BinaryChoice;","import { navigate, RouteComponentProps } from '@reach/router';\nimport { useState } from 'react';\nimport { Button, Row, Col } from 'react-onsenui';\nimport BinaryChoice from '../binaryChoice/BinaryChoice';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Patient, StateType, TestResult } from '../../types';\nimport * as actions from '../../redux/patients';\nimport paths from '../../urls';\nimport './Question.css'\n\nconst YesNoQuestion = ({question, answer, next, prev, value}: any) => {\n\n  const onChange = (v: boolean) => {\n      answer(v);\n  }\n\n  return (\n      <div className='binaryChoice'>\n        <div id='question-text'>\n          <div id='request'>Ask the patient:</div>\n          <div id='question'>{question.text}</div>\n          <div id='hint'>{question.hint}</div>\n        </div>\n        <BinaryChoice callback={onChange} value={value} />\n        <Row>\n          {prev?(<Col><Button  onClick={prev}>Prev</Button></Col>):(<Col />)}\n          {next?(<Col><Button  onClick={next}>Next</Button></Col>):<Col />}\n        </Row>\n      </div>\n  );\n};\n\nconst Questions = (props: RouteComponentProps) => {\n\n  const dispatch = useDispatch()\n  const patient: Patient = useSelector<StateType, Patient>(state => Object.assign(new Patient(), state.patients[state.currentPatient]))\n\n  const questions = [ \n    {text: \"What is your name?\", hint: \"Patient must provide their full name.\"}, \n    {text: \"What is the name of this place?\", hint: \"Patient must be able to give the name of e.g. specific hospital or sports field\"}, \n    {text: \"Why are you here?\", hint: \"Patient must be able to describe the circumstances leading to the assessment.\"}, \n    {text: \"What is the month?\", hint: \"Patient must name the month\"}, \n    {text: \"What is the year?\", hint: \"Ok if the response is abbreviated, e.g. 21 for 2021\"}\n    ]\n  \n  const testResult = new TestResult();\n\n  const [result, setResult] = useState(testResult)\n  const [question, setQuestion] = useState(0)\n\n  const next = () => {\n    if (question + 1 < questions.length) {\n      setQuestion(question + 1)\n    } else {\n      patient.updateLastTest(result);\n      dispatch(actions.updatePatient(patient));\n      navigate(paths.images);\n    }\n  }\n\n  const prev = () => {\n    if (question > 0) {\n      setQuestion(question - 1)\n    } \n  }\n\n  const answerQuestion = (answer: boolean) => {\n    const newResult = Object.assign({}, result);\n    newResult.questions[question] = answer;\n    setResult(newResult); \n  }\n\n  if (patient) {\n\n    return (<YesNoQuestion answer={answerQuestion} \n                          question={questions[question]} \n                          value={result.questions[question]}\n                          next={next} \n                          prev={(question > 0)?prev:0}/>)\n    } else { \n      return (<p>Hmmm..</p>)\n    }\n  }\n\nexport default Questions;","import { navigate } from '@reach/router';\nimport {RouteComponentProps} from '@reach/router';\nimport {ListItem, List} from 'react-onsenui';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {StateType, Patient} from '../../types';\nimport * as actions from '../../redux/patients';\nimport paths from '../../urls';\nimport { useEffect, useState } from 'react';\n\nimport './PatientList.css';\n\nconst PatientList = (props: RouteComponentProps) => {\n\n    const dispatch = useDispatch();\n    const state: StateType = useSelector<StateType, StateType>(\n            state => {\n                const sortedState = Object.assign({}, state);\n                sortedState.patients.sort((a,b) => {\n                    const aR = new Date(a.reminder);\n                    const bR = new Date(b.reminder);\n                    if (aR > bR) {\n                        return -1;\n                    } else if (aR < bR) {\n                        return 1;\n                    } else {\n                        return 0;\n                    }\n                }) \n                return sortedState;\n            });\n\n    const [dummy, setDummy] = useState(0);\n    useEffect(() => {\n        const interval = setInterval(() => {\n            setDummy(dummy + 1);  // just to force a render\n        }, 60000); \n        return () => clearInterval(interval);\n    }, [dummy]);\n\n    const onClick = (idx: number | undefined) => {\n        if (typeof(idx) != \"undefined\") {\n            dispatch(actions.selectPatient(idx));\n            navigate(paths.patientreport);\n        }  \n    }\n\n    const renderRow = (row: any, idx?: number | undefined) => {\n\n        const patient = Object.assign(new Patient(), row);\n        patient.date = new Date(row.date);\n   \n        let reminder = (Date.parse(row.reminder) - Date.now())/60000;\n        if (reminder < 0) {\n            reminder = 0;\n        }\n        let date = '';\n        if (patient.date) {\n            date = patient.date.toLocaleDateString('en-au', {day: '2-digit', month: '2-digit', hour: 'numeric', minute: 'numeric'})\n        }\n\n        return (<ListItem key={idx} onClick={() => onClick(idx)}>\n            <div className=\"left\">{row.name}</div> \n            <div className=\"center\">\n                <div className=\"list-item__title\">{row.location}</div>                \n                <div className=\"list-item__subtitle\">{date}</div>\n                </div>\n            <div className=\"right\">{reminder ? (<span>{Math.floor(reminder/60)}h {(reminder % 60).toFixed()}m</span>) : ''}</div>\n            </ListItem>);\n    }\n\n    return (\n        <List\n            dataSource={state.patients}\n            renderRow={renderRow}>\n        </List>\n    )\n\n}\n\nexport default PatientList;","import { useEffect, useState } from 'react';\nimport {navigate, RouteComponentProps} from '@reach/router';\nimport {useSelector} from 'react-redux';\nimport {Button, Row, Col, List, ListItem, ListTitle} from 'react-onsenui';\nimport {format, formatDistanceToNow} from 'date-fns';\nimport {StateType, Patient} from '../../types'; \nimport paths from '../../urls';\nimport './PatientReport.css';\n\n\nconst PatientReport = (props: RouteComponentProps) => {\n\n    const patient: Patient = useSelector<StateType, Patient>(state => Object.assign(new Patient(), state.patients[state.currentPatient]))\n   \n    const [dummy, setDummy] = useState(0);\n    useEffect(() => {\n        const interval = setInterval(() => {\n            setDummy(dummy + 1);  // just to force a render\n        }, 60000); \n        return () => clearInterval(interval);\n    }, [dummy]);\n\n\n    const rr = Date.parse(patient.reminder);\n    let reminder = (rr - Date.now())/60000;\n    // if reminder is in the past, we just display 0h, 0m\n    if (reminder < 0) {\n        reminder = 0;\n    }\n\n    let date = 'unknown';\n    if (patient.date) {\n        date = format(Date.parse(patient.date), \"dd/MM hh:mm\")\n    }\n\n    // we want to display the tests in reverse order\n    const tests = patient.tests.slice()\n    tests.reverse();\n\n    return (\n        <div className='patient-report'>\n            <dl>\n                <dt>Name</dt><dd>{patient.name}</dd>\n                <dt>Location</dt><dd>{patient.location}</dd>\n                <dt>Date</dt><dd>{date}</dd>\n                <dt>Screened</dt><dd>{patient.screened ? 'Yes': 'No'}</dd>\n            </dl>\n\n            {reminder ? (            \n                <div className=\"reminder\">Recall test: {Math.floor(reminder/60)}h {(reminder % 60).toFixed()}m</div>\n                ) : ''}\n\n            <Col className=\"reminder-actions\"> \n                <Row>\n                    <ListTitle>Test Results</ListTitle>\n                    <List>\n                            {\n                            tests.map((tr) => {\n                                return (<ListItem key={tr.date}>\n                                            <div className=\"list-item__title\">{formatDistanceToNow(Date.parse(tr.date), {addSuffix: true})}</div>\n                                            <div className=\"list-item__subtitle\">Score:&nbsp; \n                                            {tr.questions.filter(x => x?1:0).length}/5&nbsp;\n                                            {tr.pictures}/3</div>\n                                        </ListItem>)\n                            })} \n                    </List>\n                </Row>\n                <Row><Button onClick={() => {navigate(paths.screening)}}>Re-test Patient</Button></Row>\n                <Row><Button onClick={() => {navigate(paths.setreminder)}}>Set Reminder</Button></Row>\n                <Row><Button onClick={() => {navigate(paths.imageresponse)}}>Picture Recall</Button></Row>\n                <Row><Button onClick={() => {navigate(paths.imagegrid)}}>Picture Grid</Button></Row>\n            </Col>\n        </div>\n    )\n\n}\n\nexport default PatientReport;","import {useState} from 'react';\nimport {Col, Row, Button, Input} from 'react-onsenui';\nimport {navigate, RouteComponentProps} from '@reach/router';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {StateType, Patient} from '../../types'; \nimport * as actions from '../../redux/patients';\nimport paths from '../../urls';\n\nconst SetReminder = (props: RouteComponentProps) => {\n\n    const dispatch = useDispatch();\n    const patient: Patient = useSelector<StateType, Patient>(state => state.patients[state.currentPatient])\n    const [timerValue, setTimerValue] = useState(15);\n\n    const setTimer = (minutes: number) => {\n        dispatch(actions.setPatientTimer(minutes, patient));\n        navigate(paths.listpatients);\n    }\n\n    const onTimerChange = (event: any) => {\n        setTimerValue(parseInt(event.target.value));\n    }\n\n    return (\n        <div className=\"set-reminder\">\n            <Col className=\"reminder-actions\">\n                <Row>\n                <p>Set a reminder for the delayed picture recall test\n                using the preset buttons:</p>\n                </Row>\n                <Row>\n                    <Button onClick={() => setTimer(15)}>15 Minutes</Button>\n                </Row>\n                <Row>\n                    <Button onClick={() => setTimer(30)}>30 Minutes</Button>\n                </Row>\n                <Row>\n                    <Button onClick={() => setTimer(45)}>45 Minutes</Button>\n                </Row>\n                <Row>\n                    <Button onClick={() => setTimer(60)}>1 hour</Button>\n                </Row>\n                <Row>\n                    <Col>Or set any time:</Col>\n                    <Col><Input type=\"number\" onChange={onTimerChange} placeholder=\"Time in Minutes\"/></Col>\n                </Row>\n                <Row>\n                    <Button onClick={() => setTimer(timerValue)}>Set</Button>\n                </Row>\n            </Col>\n        </div>\n    )\n}\n\n\nexport default SetReminder;","import { RouteComponentProps } from \"@reach/router\";\nimport {Card} from 'react-onsenui';\n\n\nconst Help = (props: RouteComponentProps) => {\n    return (\n        <div>\n            <Card> \n            This app is intended for use by clinicians familiar with the \n            Abbreviated-Westmead PTA Scale (A-WPTAS). When combined with a \n            standardised GCS assessment it provides an objective measure of \n            post-traumatic amnesia (PTA). The full administration and scoring \n            instructions are here             \n            <a target='new' href=\"https://www.mq.edu.au/about/about-the-university/faculties-and-departments/medicine-and-health-sciences/departments-and-centres/department-of-psychology/glasgow-coma-scale-gcs-and-abbreviated-westmead-pta-scale-a-wptas\">A-WPTAS Administration</a>\n\n            <p>This app allows you to record the responses of individual patients\n                by following the prompt screens.  You are prompted with the text \n                of questions to the patient and can record whether they successfully\n                answer the question or not.  Images are displayed for the patient\n                to remember and you can set a reminder for a time to perform the \n                recall test.  \n            </p>\n\n            <p>You are prompted for a patient name and location. These are used\n                only as a mnemonic device so that you can identify the patient\n                at a later time.  The time of the test is automatically recorded.\n                You don't need to use real names or locations if you don't wish\n                to do so. \n            </p>\n\n            <p>Individual patient results are stored on your device only and no \n                information is sent to any server or stored on any other system. \n                This means that you are responsible for the privacy of patient \n                data stored on your device.  It also means that if your device fails \n                in some way then this data will be lost.  This is not intended \n                as an archival store of patient information. \n            </p>\n\n            <a target='new' href=\"https://www.mq.edu.au/about/about-the-university/faculties-and-departments/medicine-and-health-sciences/departments-and-centres/department-of-psychology/westmead-pta-resources\">View Online Resources</a>\n            </Card>\n            </div>\n    )\n}\n\n\nexport default Help;","import React from 'react'; \nimport {Router, Link} from '@reach/router';\nimport {Page, Toolbar, Icon} from 'react-onsenui'\nimport paths from './urls';\n\nimport './App.css';\n\nimport 'onsenui/css/onsenui.css';\nimport 'onsenui/css/onsen-css-components.css';\n\nimport Home from './components/home/Home';\nimport ImageQuestion from './components/imageQuestion/ImageQuestion';\nimport ImageGrid from './components/imageQuestion/ImageGrid';\nimport NewPatient from './components/newPatient/NewPatient';\nimport ScreeningQ from './components/screeningQ/ScreeningQ';\nimport Questions from './components/question/Question';\nimport PatientList from './components/patientList/PatientList';\nimport PatientReport from './components/patientReport/PatientReport';\nimport SetReminder from './components/setReminder/SetReminder';\nimport Help from './components/help/Help';\n\nfunction App() {\n\n  return (\n    <Page renderToolbar={() => \n      <Toolbar>\n        <div className='left'>\n        <Link to={paths.home}><Icon  icon='home' /></Link>\n        </div>\n        <div className='center'>\n          A-WPTAS\n        </div>\n        <div className='right'>\n          <Link to={paths.help}><Icon icon='question-circle' />&nbsp;</Link>\n        </div>\n      </Toolbar>\n    }>\n      <Router>\n        <Home path={paths.home} />\n        <NewPatient path={paths.newpatient} />\n        <ScreeningQ path={paths.screening} />\n        <Questions path={paths.questions} />\n        <ImageQuestion respond={false} path={paths.images} />\n        <ImageQuestion respond={true} path={paths.imageresponse} />\n        <ImageGrid path={paths.imagegrid} />\n        <PatientList path={paths.listpatients} />\n        <PatientReport path={paths.patientreport} />\n        <SetReminder path={paths.setreminder} />\n        <Help path={paths.help} />\n      </Router>\n      \n    </Page>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { createStore, applyMiddleware } from 'redux';\nimport patientReducer from './patients';\nimport { migrate } from './migrate';\nimport {StateType} from '../types';\n\nconst middlewares = [];\n \nif (process.env.NODE_ENV === `development`) {\n  const { logger } = require(`redux-logger`);\n  middlewares.push(logger);\n}\n\nconst createStoreWithMiddleware = applyMiddleware(...middlewares)(createStore); \n\nmigrate();\n\n// get saved content from localStorage\nlet preloadedState: StateType;\nconst persistedStateString = localStorage.getItem('state');\nif (persistedStateString) {\n  preloadedState= JSON.parse(persistedStateString);\n  if (!preloadedState.patients || typeof(preloadedState.currentPatient) === \"undefined\") {\n    preloadedState = {patients: [], currentPatient: -1};\n  }\n}\n\n\nconst configureStore = () => createStoreWithMiddleware(patientReducer, preloadedState);\nexport default configureStore;","/* \n* Functions to migrate the data store after an upgrade\n*/\n\nexport const migrate = () => {\n    console.log(\"Migrating data store...\");\n    const version = get_data_version();\n    migrations.forEach(fn => fn(version))\n}\n\nconst get_data_version = () => {\n    const version = localStorage.getItem(\"dataVersion\");\n    if (version === null) {\n        return '1';\n    } else {\n        return version;\n    }\n}\n\nconst set_data_version = (version: string) => {\n    localStorage.setItem(\"dataVersion\", version);\n}\n\nconst migrations = [\n    (version: string) => {\n        if (version < '2') {\n            console.log(\"Migrating to version 2\");\n            /*\n              move test results into the tests property\n            */\n            const state = localStorage.getItem('state');\n            if (state) {\n                const {patients, currentPatient} = JSON.parse(state);\n                const newPatients = patients.map((patient: any) => {\n                    return {\n                            name: patient.name,\n                            date: patient.date ? patient.date : new Date().toISOString(),\n                            location: patient.location,\n                            reminder: patient.reminder,\n                            tests: [{\n                                date: patient.date, \n                                questions: patient.questions,\n                                pictures: patient.pictures\n                            }]\n                        }\n                });\n                localStorage.setItem('state', JSON.stringify({patients: newPatients, currentPatient}));\n            }\n            set_data_version('2')\n        }\n    }\n]\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport reportWebVitals from './reportWebVitals';\nimport configureStore from './redux/configureStore';\nimport { Provider } from 'react-redux';\nimport { Plugins } from '@capacitor/core';\n\n\nconst {LocalNotifications} = Plugins;\n\nconst store = configureStore();\n\n\n\n/* this gives many warnings...\n <React.StrictMode>\n    <App />\n  </React.StrictMode>\n*/\n\n/* ask to be allowed to make notifications */\nLocalNotifications.requestPermission().then((response) => console.log(response));\n\nReactDOM.render(\n  <Provider store={store}>\n   <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}