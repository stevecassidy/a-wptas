(this["webpackJsonpa-wptas"]=this["webpackJsonpa-wptas"]||[]).push([[0],{35:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n(1),s=n(8),a=n.n(s),r=n(3),o=n(2);n(35),n(36),n(37),n(38);var l=function(e){var t=function(e){e.preventDefault(),e.currentTarget.dataset.path&&Object(r.c)(e.currentTarget.dataset.path)};return Object(c.jsxs)("div",{className:"Home",children:[Object(c.jsxs)(o.Card,{children:[Object(c.jsx)("div",{className:"title",children:Object(c.jsx)(o.Button,{onClick:t,modifier:"large-cta","data-path":"/newpatient",children:"New Patient"})}),Object(c.jsx)("div",{className:"content",children:Object(c.jsx)("p",{children:"Start an assessment of a new patient."})})]}),Object(c.jsxs)(o.Card,{children:[Object(c.jsx)("div",{className:"title",children:Object(c.jsx)(o.Button,{onClick:t,modifier:"large-cta","data-path":"/listpatients",children:"Review Patients"})}),Object(c.jsx)("div",{className:"content",children:Object(c.jsx)("p",{children:"Review results from previous patients."})})]})]})},j=n(6),b=(n(39),n.p+"static/media/cup.56864a7c.png"),d=n.p+"static/media/keys.6b0d9638.png",u=n.p+"static/media/bird.cfd081bf.png",h=n(4),O=n(5),x="ADD_PATIENT",p="UPDATE_PATIENT",m="SELECT_PATIENT",v="DELETE_PATIENT",f="SET_PATIENT_PICTURE_SCORE",g="SET_PATIENT_TIMER";var w={patients:[],currentPatient:-1};function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0,n=Object.assign({},e);switch(t.type){case p:"number"===typeof t.index&&t.index>=0&&t.index<e.patients.length&&(n=Object.assign({},e,{patients:[].concat(Object(O.a)(e.patients.slice(0,t.index)),[t.value],Object(O.a)(e.patients.slice(t.index+1)))}));break;case x:n=Object.assign({},e,{patients:[].concat(Object(O.a)(e.patients),[t.value]),currentPatient:e.patients.length});break;case m:"number"===typeof t.index&&t.index>=0&&t.index<e.patients.length?n=Object.assign({},e,{currentPatient:t.index}):console.log("SELECT_PATIENT out of range",t.index,e.patients.length);break;case v:"number"===typeof t.index&&t.index>=0&&t.index<e.patients.length&&(n=Object.assign({},e,{patients:[].concat(Object(O.a)(e.patients.slice(0,t.index)),Object(O.a)(e.patients.slice(t.index+1)))}));break;case f:if(e.currentPatient>=0&&"number"===typeof t.nvalue){var c=Object.assign({},e.patients[e.currentPatient],{pictures:t.nvalue});n=Object.assign({},e,{patients:[].concat(Object(O.a)(e.patients.slice(0,e.currentPatient)),[c],Object(O.a)(e.patients.slice(e.currentPatient+1)))})}break;case g:if(e.currentPatient>=0&&"number"===typeof t.nvalue){var i=0;0!==t.nvalue&&(i=new Date(Date.now()+60*t.nvalue*1e3).getTime());var s=Object.assign({},e.patients[e.currentPatient],{reminder:i});n=Object.assign({},e,{patients:[].concat(Object(O.a)(e.patients.slice(0,e.currentPatient)),[s],Object(O.a)(e.patients.slice(e.currentPatient+1)))})}}return localStorage.setItem("state",JSON.stringify(n)),n}var N=function(e){var t=e.label,n=e.image,s=e.respond,a=e.callback,r=Object(i.useState)(!1),o=Object(j.a)(r,2),l=o[0],b=o[1],d="image";return l&&(d+=" selected"),Object(c.jsx)("div",{className:d,onClick:function(){s&&(console.log(t,!l),a(!l),b(!l))},children:Object(c.jsx)("img",{src:n,alt:t})})},C=function(e){var t=e.respond,n=Object(h.b)(),s=Object(i.useState)(0),a=Object(j.a)(s,2),l=a[0],O=a[1],x=function(){t?(n({type:f,nvalue:l}),Object(r.c)("/listpatients")):Object(r.c)("/setreminder")},p=function(){t?Object(r.c)("/newpatient/images"):Object(r.c)("/newpatient/")},m=function(e){O(e?Math.min(3,l+1):Math.max(0,l-1))};return t?(console.log("score",l),Object(c.jsxs)("div",{className:"image-question",children:[Object(c.jsx)("p",{children:"Touch the images recalled correctly"}),Object(c.jsxs)("div",{className:"image-grid",children:[Object(c.jsx)(N,{label:"cup",image:b,respond:t,callback:m}),Object(c.jsx)(N,{label:"keys",image:d,respond:t,callback:m}),Object(c.jsx)(N,{label:"bird",image:u,respond:t,callback:m})]}),Object(c.jsxs)(o.Row,{children:[Object(c.jsx)(o.Col,{children:Object(c.jsx)(o.Button,{onClick:p,children:"Prev"})}),Object(c.jsx)(o.Col,{children:Object(c.jsx)(o.Button,{onClick:x,children:"Next"})})]})]})):Object(c.jsxs)("div",{className:"image-question",children:[Object(c.jsx)("p",{children:"Remember these images."}),Object(c.jsxs)("div",{className:"image-grid",children:[Object(c.jsx)(N,{label:"cup",image:b}),Object(c.jsx)(N,{label:"keys",image:d}),Object(c.jsx)(N,{label:"bird",image:u})]}),Object(c.jsxs)(o.Row,{children:[Object(c.jsx)(o.Col,{children:Object(c.jsx)(o.Button,{onClick:p,children:"Prev"})}),Object(c.jsx)(o.Col,{children:Object(c.jsx)(o.Button,{onClick:x,children:"Next"})})]})]})},P=n(11),y=(n(42),function(e){var t=Object(h.b)(),n=Object(i.useState)({name:"",location:"",questions:[],pictures:0,reminder:0}),s=Object(j.a)(n,2),a=s[0],l=s[1];return Object(c.jsxs)("div",{className:"new-patient-form",children:[Object(c.jsx)("div",{className:"form-row",children:Object(c.jsx)(o.Input,{value:a.name,float:!0,onChange:function(e){l(Object(P.a)(Object(P.a)({},a),{},{name:e.target.value}))},placeholder:"Patient Name"})}),Object(c.jsx)("div",{className:"form-row",children:Object(c.jsx)(o.Input,{value:a.location,float:!0,onChange:function(e){l(Object(P.a)(Object(P.a)({},a),{},{location:e.target.value}))},placeholder:"Location"})}),Object(c.jsx)("div",{className:"form-row",children:Object(c.jsx)(o.Button,{onClick:function(e){t({type:x,value:a}),Object(r.c)("/newpatient/questions")},children:"Next"})})]})}),T=(n(43),function(e){var t=e.callback,n=e.value,i=function(e){t(e)},s=n?"selected":"",a=n?"":"selected";return"undefined"===typeof n&&(a=""),Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:"binaryChoiceContainer",children:[Object(c.jsx)("div",{className:"binary-choice-button yes-button "+s,onClick:function(){return i(!0)},children:Object(c.jsx)(o.Icon,{size:{default:120},icon:"check"})}),Object(c.jsx)("div",{className:"binary-choice-button no-button "+a,onClick:function(){return i(!1)},children:Object(c.jsx)(o.Icon,{size:{default:120},icon:"close"})})]})})}),E=(n(44),function(e){var t=Object(h.c)((function(e){return e.patients[e.currentPatient]}));return Object(c.jsxs)(o.Row,{className:"patient-report",children:[t.questions.map((function(e,t){return Object(c.jsx)(o.Col,{className:"patient-report-item",children:Object(c.jsx)("div",{className:"tick-cross ".concat(e?"tick":"cross"),children:Object(c.jsx)(o.Icon,{icon:e?"check":"close"})})},t)})),Object(c.jsx)(o.Col,{children:Object(c.jsx)("div",{className:"tick-cross ".concat(3===t.pictures?"tick":"cross"),children:Object(c.jsx)("div",{className:"picture-score",children:t.pictures})})})]})}),I=(n(45),function(e){var t=e.question,n=e.answer,i=e.next,s=e.prev,a=e.value;return Object(c.jsxs)("div",{className:"binaryChoice",children:[Object(c.jsxs)("div",{id:"question-text",children:[Object(c.jsx)("div",{id:"request",children:"Ask the patient:"}),Object(c.jsx)("div",{id:"question",children:t.text}),Object(c.jsx)("div",{id:"hint",children:t.hint})]}),Object(c.jsx)(T,{callback:function(e){n(e)},value:a}),Object(c.jsxs)(o.Row,{children:[Object(c.jsx)(o.Col,{children:Object(c.jsx)(o.Button,{onClick:s,children:"Prev"})}),Object(c.jsx)(o.Col,{children:Object(c.jsx)(o.Button,{onClick:i,children:"Next"})})]}),Object(c.jsx)(E,{})]})}),S=function(e){var t=Object(h.b)(),n=Object(h.c)((function(e){return console.log(e),e.patients[e.currentPatient]})),s=[{text:"What is your name?",hint:"Patient must provide thier full name."},{text:"What is the name of this place?",hint:"Patient must be able to give the name of e.g. sports field"},{text:"Why are you here?",hint:"Patient must know why they were admitted to hospital"},{text:"What is the month?",hint:"Patient must name the month"},{text:"What is the year?",hint:"Ok if the response is '21' or '2021'"}];console.log(n);var a=Array(5);n&&(a=n.questions);var o=Object(i.useState)(a),l=Object(j.a)(o,2),b=l[0],d=l[1],u=Object(i.useState)(0),O=Object(j.a)(u,2),x=O[0],m=O[1];return console.log(n),console.log("QQ",b,x),n?Object(c.jsx)(I,{answer:function(e){var c=b.slice();c[x]=e,d(c),n.questions=c,console.log(n.questions),t({type:p,value:n})},question:s[x],value:b[x],next:function(){x+1<s.length?m(x+1):Object(r.c)("/newpatient/images")},prev:function(){x>0&&m(x-1)}}):Object(c.jsx)("p",{children:"Hmmm.."})},R=function(e){var t=Object(h.b)(),n=Object(h.c)((function(e){return e})),i=function(e){"undefined"!=typeof e&&(t({type:m,index:e}),Object(r.c)("/patientreport"))};return Object(c.jsx)(o.List,{dataSource:n.patients,renderRow:function(e,t){var n=(e.reminder-Date.now())/6e4;return n<0&&(n=0),Object(c.jsxs)(o.ListItem,{onClick:function(){return i(t)},children:[Object(c.jsx)("div",{className:"left",children:e.name}),Object(c.jsx)("div",{className:"center",children:e.location}),Object(c.jsxs)("div",{className:"right",children:[(n/60).toFixed(0),"h ",(n%60).toFixed(),"m"]})]},t)}})},B=(n(46),function(e){var t=Object(h.c)((function(e){return e.patients[e.currentPatient]})),n=(t.reminder-Date.now())/6e4;return n<0&&(n=0),Object(c.jsxs)("div",{children:[Object(c.jsxs)("p",{children:["Patient report for ",Object(c.jsx)("strong",{children:t.name})," at ",Object(c.jsx)("strong",{children:t.location})]}),Object(c.jsx)("p",{children:"Time to recall test"}),Object(c.jsxs)("div",{className:"reminder",children:[(n/60).toFixed(0),"h ",(n%60).toFixed(),"m"]}),Object(c.jsxs)(o.Col,{children:[Object(c.jsx)(o.Row,{children:Object(c.jsx)(E,{})}),Object(c.jsx)(o.Row,{children:Object(c.jsx)(o.Button,{onClick:function(){Object(r.c)("/newpatient/questions")},children:"Update Answers"})}),Object(c.jsx)(o.Row,{children:Object(c.jsx)(o.Button,{onClick:function(){Object(r.c)("/setreminder")},children:"Set Reminder"})})]})]})}),q=function(e){var t=Object(h.b)(),n=function(e){t({type:g,nvalue:e}),Object(r.c)("/listpatients")};return Object(c.jsxs)("div",{className:"set-reminder",children:[Object(c.jsx)("p",{children:"Set a reminder for the image memory test."}),Object(c.jsxs)(o.Col,{width:"50%",children:[Object(c.jsx)(o.Row,{children:Object(c.jsx)(o.Button,{onClick:function(){return n(15)},children:"15 Minutes"})}),Object(c.jsx)(o.Row,{children:Object(c.jsx)(o.Button,{onClick:function(){return n(30)},children:"30 Minutes"})}),Object(c.jsx)(o.Row,{children:Object(c.jsx)(o.Button,{onClick:function(){return n(45)},children:"45 Minutes"})}),Object(c.jsx)(o.Row,{children:Object(c.jsx)(o.Button,{onClick:function(){return n(60)},children:"1 hour"})})]})]})};var A=function(){return Object(c.jsx)(o.Page,{renderToolbar:function(){return Object(c.jsxs)(o.Toolbar,{children:[Object(c.jsx)("div",{className:"left",children:Object(c.jsx)(r.a,{to:"/",children:Object(c.jsx)(o.Icon,{icon:"home"})})}),Object(c.jsx)("div",{className:"center",children:"A-WPTAS"}),Object(c.jsx)("div",{className:"right",children:"\xa0"})]})},children:Object(c.jsxs)(r.b,{children:[Object(c.jsx)(l,{path:"/"}),Object(c.jsx)(y,{path:"/newpatient"}),Object(c.jsx)(S,{path:"/newpatient/questions"}),Object(c.jsx)(C,{respond:!1,path:"/newpatient/images"}),Object(c.jsx)(C,{respond:!0,path:"/newpatient/images/response"}),Object(c.jsx)(R,{path:"/listpatients"}),Object(c.jsx)(B,{path:"/patientreport"}),Object(c.jsx)(q,{path:"/setreminder"})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D,_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),s(e),a(e)}))},F=n(10),L=F.a.apply(void 0,[])(F.c),W=localStorage.getItem("state");W&&((D=JSON.parse(W)).patients&&"undefined"!==typeof D.currentPatient||(D={patients:[],currentPatient:-1}));var M=function(){return L(k,D)}();a.a.render(Object(c.jsx)(h.a,{store:M,children:Object(c.jsx)(A,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),_()}},[[47,1,2]]]);
//# sourceMappingURL=main.ab87ca58.chunk.js.map